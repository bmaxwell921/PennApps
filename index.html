<!DOCTYPE html>
<html>
  <head>
    <link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
    <script type="text/javascript">

    // Use the Google API Loader script to load the google.picker script.
    function loadPicker() {
      gapi.load('picker', {'callback': createPicker});
    }

    // Use your own API developer key.
    var developerKey = 'AIzaSyAylmnFEfHP51gM7x6LbSXRe2op0MknRwE';

    // Create and render a Picker object for searching images.
    function createPicker() {
      var view = new google.picker.View(google.picker.ViewId.DOCS);
      view.setMimeTypes("audio/aiff,audio/mpeg, audio/x-mpeg, audio/mpeg3, audio/x-mpeg3, audio/wav, audio/x-wav");    
      var picker = new google.picker.PickerBuilder()
//          .enableFeature(google.picker.Feature.NAV_HIDDEN)
//          .enableFeature(google.picker.Feature.MULTISELECT_ENABLED)
//          .setAppId(801601951194)
//          .setOAuthToken(AUTH_TOKEN) //Optional: The auth token used in the current Drive API session.
          .addView(view)
//          .addView(new google.picker.DocsUploadView())
          .setDeveloperKey(developerKey)
          .setCallback(pickerCallback)
	  .setOrigin('https' + '://' + 'soundclouduploader.appspot.com/'
          .build();
       picker.setVisible(true);
    }

    // A simple callback implementation.
    function pickerCallback(data) {
      if (data.action == google.picker.Action.PICKED) {
        var fileId = data.docs[0].id;
        alert('The user selected: ' + fileId);
      }
    }


    function dropboxDialog() {
	Dropbox.choose({

            // Required. Called when a user selects an item in the Chooser.
            success: function(files) {
                alert("Here's the file link:" + files[0].link)
            },

            // Optional. "preview" (default) is a preview link to the document for sharing,
            // "direct" is an expiring link to download the contents of the file. For more
            // information about link types, see Link types below.
            linkType: "direct",

            // Optional. A value of false (default) limits selection to a single file, while
            // true enables multiple file selection.
            multiselect: false,
        
            // Optional. This is a list of file extensions. If specified, the user will
            // only be able to select files with these extensions. You may also specify
            // file types, such as "video" or "images" in the list. For more information,
            // see File types below. By default, all extensions are allowed.
            extensions: ['.pdf', '.doc', '.docx'],
            
        });
    }    
    </script>
	
	
	</head>
  <body>
    <form action="/sign?guestbook_name={{ guestbook_name }}" method="post">
      <div><textarea name="content" rows="3" cols="60"></textarea></div>
      <div><input type="submit" value="Sign Guestbook"></div>
    </form>

    <hr>

    <form>Guestbook name:
      <input value="{{ guestbook_name }}" name="guestbook_name">
      <input type="submit" value="switch">
    </form>

    <a href="{{ url|safe }}">{{ url_linktext }}</a>
    <div id="result"></div>

	<div>
		<button id="sdButton" onclick="attemptLogin()">SkyDrive</button>
		<button class="google" onclick="loadPicker()">Google</button>
		<button class="DropBox" onclick="dropboxDialog()">Dropbox</button>
	</div>	
  </body>
</html>


<script type="text/javascript" src="https://www.dropbox.com/static/api/1/dropins.js" id="dropboxjs" data-app-key="xvj2z2xsic745s1"></script>
<script src="//js.live.net/v5.0/wl.js" type="text/javascript"></script>
<script src='/js/sdfilepicker.js' type="text/javascript"></script>
<script type="text/javascript" src="https://apis.google.com/js/api.js"></script>
